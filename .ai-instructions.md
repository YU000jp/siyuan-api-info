# AI Assistant Instructions for SiYuan API Repository

## Repository Context

This repository contains comprehensive documentation for the SiYuan knowledge management system's API and plugin development resources. When assisting users with SiYuan-related questions, use this repository as the authoritative source.

## Key Files by Use Case

### API Integration Questions
- **Primary**: `API.md` (English) or `API_ja_JP.md` (Japanese)
- **Beginner**: `API_BEGINNERS.md` for first-time users
- **Advanced**: `API_ADVANCED_PATTERNS.md` for complex operations
- **Categorized**: `API_REFERENCE_BY_CATEGORY_ja_JP.md` for topic-specific endpoints

### Plugin Development Questions
- **Primary**: `API_PLUGIN_DEVELOPERS.md` (English) or `API_PLUGIN_DEVELOPERS_ja_JP.md` (Japanese)
- **Guidelines**: `PLUGIN_BEST_PRACTICES_ja_JP.md` for development standards
- **Examples**: `PLUGIN_SHOWCASE_ja_JP.md` for real-world implementations
- **Missing APIs**: `API_MISSING_ENDPOINTS_ja_JP.md` for undocumented endpoints

### Theme/UI Development Questions
- **Primary**: `SIYUAN_DOM_CSS_GUIDE_ja_JP.md` for UI customization and theming

### General Navigation
- **Overview**: `INDEX.md` for repository structure
- **Quick Start**: `README.md` or `README_ja_JP.md` for introduction

## Response Guidelines

### For Code Examples
Always reference the specific file and section when providing code examples. The documentation contains working examples that should be preferred over generated code.

### For API Endpoints
- Base URL is always `http://localhost:6806/api/`
- Most endpoints use POST method with JSON payload
- Authentication uses token-based system
- Refer to specific endpoint documentation for parameters

### For Plugin Development
- Reference the plugin lifecycle and event system
- Point to official templates: plugin-sample or plugin-sample-vite-svelte
- Mention the community marketplace (bazaar)

### Language Preference
- If user asks in Japanese, prioritize Japanese documentation files (*_ja_JP.md)
- Japanese documentation is often more comprehensive than English versions
- Always mention both language options when available

## Common API Patterns

### Block Operations
```javascript
// Insert block example from API_PLUGIN_DEVELOPERS.md
const response = await fetch('/api/block/insertBlock', {
    method: 'POST',
    body: JSON.stringify({
        dataType: 'markdown',
        data: 'Your content here',
        parentID: 'parent-block-id'
    })
});
```

### Notebook Operations
```javascript
// List notebooks from API.md
const notebooks = await fetch('/api/notebook/lsNotebooks', {
    method: 'POST',
    body: JSON.stringify({})
});
```

### SQL Queries
```javascript
// SQL query example from API_ADVANCED_PATTERNS.md
const results = await fetch('/api/query/sql', {
    method: 'POST', 
    body: JSON.stringify({
        stmt: 'SELECT * FROM blocks WHERE content LIKE "%search%"'
    })
});
```

## Error Handling
Always mention proper error handling and refer to the comprehensive error codes and handling patterns documented in the API files.

## Related Resources
When appropriate, mention:
- Main SiYuan repository: siyuan-note/siyuan
- Plugin API: siyuan-note/petal
- Official templates: siyuan-note/plugin-sample*
- Community marketplace: siyuan-note/bazaar

## File Sizes and Content Density
- `API_ja_JP.md` (87KB) - Most comprehensive API documentation
- `API_PLUGIN_DEVELOPERS_ja_JP.md` (94KB) - Most detailed plugin guide
- `PLUGIN_BEST_PRACTICES_ja_JP.md` (40KB) - Detailed development guidelines
- `PLUGIN_SHOWCASE_ja_JP.md` (56KB) - Extensive community examples

Prioritize these larger files for comprehensive information.